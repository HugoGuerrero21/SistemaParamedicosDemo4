<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="SistemaParamedicosDemo4.MVVM.Views.LoginView"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:SistemaParamedicosDemo4.MVVM.ViewModels"
             Title="Iniciar Sesión"
             BackgroundColor="#0F1419"
             Shell.NavBarIsVisible="False">

    <ContentPage.BindingContext>
        <viewModels:LoginViewModel/>
    </ContentPage.BindingContext>

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Colores Modo Oscuro -->
            <Color x:Key="PrimaryColor">#4A9EFF</Color>
            <Color x:Key="BackgroundDark">#0F1419</Color>
            <Color x:Key="CardBackground">#1A1F29</Color>
            <Color x:Key="TextPrimary">#E8EAED</Color>
            <Color x:Key="TextSecondary">#9BA1A6</Color>
            <Color x:Key="BorderColor">#2D3748</Color>
            <Color x:Key="InputBackground">#252D38</Color>

            <!-- Estilos -->
            <Style x:Key="TitleStyle" TargetType="Label">
                <Setter Property="FontSize" Value="32"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
                <Setter Property="HorizontalOptions" Value="Center"/>
            </Style>

            <Style x:Key="SubtitleStyle" TargetType="Label">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="TextColor" Value="{StaticResource TextSecondary}"/>
                <Setter Property="HorizontalOptions" Value="Center"/>
                <Setter Property="Margin" Value="0,5,0,30"/>
            </Style>

            <Style x:Key="LabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
                <Setter Property="Margin" Value="0,0,0,8"/>
            </Style>

            <Style x:Key="EntryStyle" TargetType="Entry">
                <Setter Property="BackgroundColor" Value="Transparent"/>
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
                <Setter Property="PlaceholderColor" Value="{StaticResource TextSecondary}"/>
                <Setter Property="HeightRequest" Value="50"/>
                <Setter Property="FontSize" Value="16"/>
            </Style>

            <Style x:Key="LoginButtonStyle" TargetType="Button">
                <Setter Property="BackgroundColor" Value="{StaticResource PrimaryColor}"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="HeightRequest" Value="55"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Setter Property="Margin" Value="0,20,0,0"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView>
        <Grid>
            <VerticalStackLayout 
                Padding="40"
                VerticalOptions="Center"
                Spacing="0">

                <!-- Logo de la empresa -->
                <Image Source="logo_trs.png"
                       HeightRequest="120"
                       WidthRequest="120"
                       Aspect="AspectFit"
                       HorizontalOptions="Center"
                       Margin="0,0,0,30"/>

                <!-- Título -->
                <Label 
                    Text="Sistema Paramédicos"
                    Style="{StaticResource TitleStyle}"/>

                <Label 
                    Text="Ingrese sus credenciales"
                    Style="{StaticResource SubtitleStyle}"/>

                <!-- Formulario -->
                <Border 
                    BackgroundColor="{StaticResource CardBackground}"
                    StrokeThickness="1"
                    Stroke="{StaticResource BorderColor}"
                    Padding="30"
                    MaximumWidthRequest="500">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow 
                            Brush="Black"
                            Opacity="0.3"
                            Radius="15"
                            Offset="0,4"/>
                    </Border.Shadow>

                    <VerticalStackLayout Spacing="0">
                        <!-- Usuario -->
                        <Label 
                            Text="Usuario"
                            Style="{StaticResource LabelStyle}"/>
                        <Border
                            BackgroundColor="{StaticResource InputBackground}"
                            StrokeThickness="1"
                            Stroke="{StaticResource BorderColor}"
                            Margin="0,0,0,20">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="8"/>
                            </Border.StrokeShape>
                            <Entry 
                                Text="{Binding usuario}"
                                Placeholder="Ingrese su usuario"
                                Style="{StaticResource EntryStyle}"/>
                        </Border>

                        <!-- Contraseña -->
                        <Label 
                            Text="Contraseña"
                            Style="{StaticResource LabelStyle}"/>
                        <Border
                            BackgroundColor="{StaticResource InputBackground}"
                            StrokeThickness="1"
                            Stroke="{StaticResource BorderColor}"
                            Margin="0,0,0,0">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="8"/>
                            </Border.StrokeShape>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>

                                <Entry 
                                    Grid.Column="0"
                                    Text="{Binding password}"
                                    Placeholder="Ingrese su contraseña"
                                    IsPassword="True"
                                    Style="{StaticResource EntryStyle}"/>
                            </Grid>
                        </Border>

                        <!-- Botón Iniciar Sesión -->
                        <Button 
                            Text="INICIAR SESIÓN"
                            Command="{Binding LoginCommand}"
                            Style="{StaticResource LoginButtonStyle}"/>

                        <!-- Indicador de carga -->
                        <ActivityIndicator 
                            IsRunning="{Binding isLoading}"
                            IsVisible="{Binding isLoading}"
                            Color="{StaticResource PrimaryColor}"
                            Margin="0,20,0,0"/>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>